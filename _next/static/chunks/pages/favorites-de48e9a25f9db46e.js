(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{1903:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return t(9448)}])},21:function(e,o,t){"use strict";var r=t(5893);t(7294);var a=t(1664),i=t.n(a),n=t(410),s=t(2010),l=t.n(s);o.Z=e=>{var o,t;let{book:a}=e,{volumeInfo:s}=a;return(0,r.jsxs)("div",{className:l().card,children:[(0,r.jsx)("h2",{className:l().title,children:s.title}),(0,r.jsx)("p",{className:l().authors,children:null===(o=s.authors)||void 0===o?void 0:o.join(", ")}),(0,r.jsx)("img",{src:null===(t=s.imageLinks)||void 0===t?void 0:t.thumbnail,alt:s.title,className:l().image}),(0,r.jsx)(i(),{href:"/book/".concat(a.id),as:"/book/".concat(a.id),children:(0,r.jsx)("a",{className:l().link,children:"More Info"})}),(0,r.jsx)("div",{className:l().favoriteButton,children:(0,r.jsx)(n.Z,{bookId:a.id})})]})}},410:function(e,o,t){"use strict";var r=t(5893),a=t(7294),i=t(3669),n=t.n(i);o.Z=e=>{let{bookId:o}=e,[t,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{var e;i(((null===(e=localStorage.getItem("favorites"))||void 0===e?void 0:e.split(","))||[]).includes(o))},[o]),(0,r.jsx)("button",{onClick:()=>{var e;let r=(null===(e=localStorage.getItem("favorites"))||void 0===e?void 0:e.split(","))||[];t?r=r.filter(e=>e!==o):r.push(o),localStorage.setItem("favorites",r.join(",")),i(!t)},className:"".concat(n().button," ").concat(t?n().favorite:n().notFavorite),children:t?"Unfavorite":"Favorite"})}},9448:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return c}});var r=t(5893),a=t(7294);let i=()=>{try{let e=localStorage.getItem("favorites");if(console.log("Retrieved favorites:",e),e)return e;return""}catch(e){return console.error("Failed to parse favorites from localStorage:",e),localStorage.removeItem("favorites"),""}};var n=t(21),s=t(5510),l=t.n(s),c=()=>{let[e,o]=(0,a.useState)([]),[t,s]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{s(!0);{let e=i().split(",");if(console.log("Favorite IDs:",e),0===e.length){o([]),s(!1);return}let t=await Promise.all(e.map(async e=>{let o=await fetch("https://www.googleapis.com/books/v1/volumes/".concat(e));if(!o.ok)throw Error("Failed to fetch book with ID ".concat(e));return o.json()}));console.log("Fetched Books:",t),o(t)}}catch(e){console.error("Error fetching favorite books:",e),d("Failed to load favorite books.")}finally{s(!1)}})()},[]),t)?(0,r.jsx)("p",{className:l().loading,children:"Loading..."}):c?(0,r.jsx)("p",{className:l().error,children:c}):(0,r.jsxs)("div",{className:l().container,children:[(0,r.jsxs)("div",{className:l().header,children:[(0,r.jsx)("h1",{children:"Your Favorite Books"}),0===e.length&&(0,r.jsx)("p",{children:"You have no favorite books yet."})]}),e.length>0&&(0,r.jsx)("div",{className:l().gridContainer,children:e.map(e=>(0,r.jsx)(n.Z,{book:e},e.id))})]})}},2010:function(e){e.exports={card:"BookCard_card__E2xRC",title:"BookCard_title__K2s0Z",authors:"BookCard_authors___lfwS",image:"BookCard_image__UHIeI",link:"BookCard_link___Y4Ii",favoriteButton:"BookCard_favoriteButton__qlU7e"}},3669:function(e){e.exports={button:"FavoriteButton_button__miIDg",favorite:"FavoriteButton_favorite__B1pzP",notFavorite:"FavoriteButton_notFavorite__SYepb"}},5510:function(e){e.exports={container:"FavoritesPage_container__4OFBy",header:"FavoritesPage_header___4Xp5",gridContainer:"FavoritesPage_gridContainer__sYBvK",loading:"FavoritesPage_loading__t2gSZ",error:"FavoritesPage_error__Fh974"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1903)}),_N_E=e.O()}]);