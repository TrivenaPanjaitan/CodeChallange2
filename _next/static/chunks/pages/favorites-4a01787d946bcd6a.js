(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{1903:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorites",function(){return o(9448)}])},21:function(e,t,o){"use strict";var r=o(5893);o(7294);var a=o(1163),i=o(410),n=o(2010),s=o.n(n);t.Z=e=>{var t,o;let{book:n}=e,l=(0,a.useRouter)(),{volumeInfo:c}=n;return(0,r.jsxs)("div",{className:s().card,children:[(0,r.jsx)("h2",{className:s().title,children:c.title}),(0,r.jsx)("p",{className:s().authors,children:null===(t=c.authors)||void 0===t?void 0:t.join(", ")}),(0,r.jsx)("img",{src:null===(o=c.imageLinks)||void 0===o?void 0:o.thumbnail,alt:c.title,className:s().image}),(0,r.jsx)("button",{onClick:()=>{l.push("/book?id=".concat(n.id))},className:s().link,children:"More Info"}),(0,r.jsx)("div",{className:s().favoriteButton,children:(0,r.jsx)(i.Z,{bookId:n.id})})]})}},410:function(e,t,o){"use strict";var r=o(5893),a=o(7294),i=o(3669),n=o.n(i);t.Z=e=>{let{bookId:t}=e,[o,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{var e;i(((null===(e=localStorage.getItem("favorites"))||void 0===e?void 0:e.split(","))||[]).includes(t))},[t]),(0,r.jsx)("button",{onClick:()=>{var e;let r=(null===(e=localStorage.getItem("favorites"))||void 0===e?void 0:e.split(","))||[];o?r=r.filter(e=>e!==t):r.push(t),localStorage.setItem("favorites",r.join(",")),i(!o)},className:"".concat(n().button," ").concat(o?n().favorite:n().notFavorite),children:o?"Unfavorite":"Favorite"})}},9448:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return c}});var r=o(5893),a=o(7294);let i=()=>{try{let e=localStorage.getItem("favorites");if(console.log("Retrieved favorites:",e),e)return e;return""}catch(e){return console.error("Failed to parse favorites from localStorage:",e),localStorage.removeItem("favorites"),""}};var n=o(21),s=o(5510),l=o.n(s),c=()=>{let[e,t]=(0,a.useState)([]),[o,s]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{s(!0);{let e=i().split(",");if(console.log("Favorite IDs:",e),0===e.length){t([]),s(!1);return}let o=await Promise.all(e.map(async e=>{let t=await fetch("https://www.googleapis.com/books/v1/volumes/".concat(e));if(!t.ok)throw Error("Failed to fetch book with ID ".concat(e));return t.json()}));console.log("Fetched Books:",o),t(o)}}catch(e){console.error("Error fetching favorite books:",e),u("Failed to load favorite books.")}finally{s(!1)}})()},[]),o)?(0,r.jsx)("p",{className:l().loading,children:"Loading..."}):c?(0,r.jsx)("p",{className:l().error,children:c}):(0,r.jsxs)("div",{className:l().container,children:[(0,r.jsxs)("div",{className:l().header,children:[(0,r.jsx)("h1",{children:"Your Favorite Books"}),0===e.length&&(0,r.jsx)("p",{children:"You have no favorite books yet."})]}),e.length>0&&(0,r.jsx)("div",{className:l().gridContainer,children:e.map(e=>(0,r.jsx)(n.Z,{book:e},e.id))})]})}},2010:function(e){e.exports={card:"BookCard_card__E2xRC",title:"BookCard_title__K2s0Z",authors:"BookCard_authors___lfwS",image:"BookCard_image__UHIeI",link:"BookCard_link___Y4Ii",favoriteButton:"BookCard_favoriteButton__qlU7e"}},3669:function(e){e.exports={button:"FavoriteButton_button__miIDg",favorite:"FavoriteButton_favorite__B1pzP",notFavorite:"FavoriteButton_notFavorite__SYepb"}},5510:function(e){e.exports={container:"FavoritesPage_container__4OFBy",header:"FavoritesPage_header___4Xp5",gridContainer:"FavoritesPage_gridContainer__sYBvK",loading:"FavoritesPage_loading__t2gSZ",error:"FavoritesPage_error__Fh974"}},1163:function(e,t,o){e.exports=o(9090)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1903)}),_N_E=e.O()}]);